import{c as e,e as t,R as l}from"./index-957404e9.js";const s=/((|:)[a-z][a-z0-9-]+)([\s]|$|\[(!|)(\.|)([a-z-]+)(:([^)=\]]+)|)(=([^\]]+?)|)])/gi,i=["disabled","hidden","checked","pressed","selected","special"],n="control";export default class{constructor(t){this.host=t,this.apply=e(this.apply,this)}changed(e,t){"control"===e&&t&&this.apply(this.state,this.applyValue)}apply(e,n,a=!1){this.state=e,this.applyValue=n;const o="boolean"==typeof e,{host:r}=this,u=r.getAttribute("control");if(!u)return;let p;const c=[];for(;p=s.exec(u);){let s,[u,d,h,y,f,b,A,g,S,$,m]=p;if(f=!!f,f&&o&&(e=!e),h)if(":root"===d)s=l;else{if(":self"!==d)continue;s=r}else s=r.nuQueryById(d);if(s)if(A){if(i.includes(A)&&(n=!0),null==m&&"boolean"==typeof n)a||t(s,A,e),c.push(s);else if(!a){let l,i;if(null==m)l=i=n;else{const e=m.split("|");l=e[0],i=e[1]||l}let a=l;const o=A.startsWith("--");!1===e?a=null==l?null:S?`${i}${S||""}`:i:S&&(a=`${l}${S||""}`),b?s[A]=a:o?null!=a&&!1!==a?s.style.setProperty(A.replace("--","--nu-"),String(a)):s.style.removeProperty(A):t(s,A,null!=a?String(a).replace(/@/g,()=>n):null)}}else a||(s.hidden=o?!e:!s.hidden),c.push(s)}if(c.length){const e=r.nuHasAria("labelledby");r.nuSetAria("controls",c.map(t=>(e||r.nuHasAria("labelledby")||r.hasAttribute("labelledby")||(r.nuSetAria("describedby",t.nuUniqId),t.setAttribute("aria-labelledby",r.nuUniqId)),t.nuUniqId)).filter(e=>e).join(" "))}else r.nuSetAria("controls",null)}}export{n as CONTROL_ATTR};
