import{W as t,h as e,i as s}from"./index-957404e9.js";export default class extends t{static get params(){return{input:!0,localized:!0,tag:"input"}}init(){const t=this.tagName=this.params.tag,{host:s}=this;if(this.ref=s.querySelector(t),!this.ref){const i=e(t);s.appendChild(i),this.ref=i}this.value=null,this.props.disabled=()=>null!=this.transferAttr("disabled",this.ref),this.props.placeholder=()=>this.transferAttr("placeholder",this.ref,"..."),this.props.mask=t=>(t=null!=t,this.setMask(t),t),super.init();const{ref:i}=this;if(null==this.value){const e="textarea"===t?i.textContent:i.value;e&&this.setValue(e,!0)}this.setFormValue(),this.transferAttr("placeholder",this.ref,"..."),i.addEventListener("input",t=>{t.stopPropagation(),this.setValue(i.value)}),i.addEventListener("change",t=>{t.stopPropagation(),this.emit("change",this.value)}),i.addEventListener("blur",()=>{s.id&&this.emit("nu-blur",s.nuId,{bubbles:!0})}),s.nuRef=i,s.hasAttribute("label")&&(s.nuChanged("label",null),s.removeAttribute("aria-label")),s.hasAttribute("labelledby")&&(s.nuChanged("label",null),s.removeAttribute("aria-labelledby")),this.inputGroup=null,this.linkContext("inputgroup",t=>{this.setEmpty()},"inputGroup"),setTimeout(()=>{this.setEmpty()},500)}setEmpty(){if(!this.ref)return;this.setMod("empty",!this.ref.value);const t=this.inputGroup;t&&t.setMod("empty",!this.ref.value)}setValue(t,e){s(this.value,t)||(this.value=t,this.setEmpty(),e||this.emit("input",this.value),this.setInputValue(t),this.setFormValue())}setInputValue(t){const{ref:e}=this,s=this.tagName;e&&("textarea"===s?e.textContent!==t&&(e.textContent=t):e.value!==t&&(e.value=t))}setMask(t){this.ref?this.ref.type=t?"password":"text":setTimeout(()=>this.setMask(t))}}
