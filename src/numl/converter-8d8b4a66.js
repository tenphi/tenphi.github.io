import{W as e,x as t,h as r}from"./index-957404e9.js";class n extends e{static get converter(){}constructor(e){super(e),this.container=null,this.observe=null}connected(){super.connected(),setTimeout(()=>this.initConverter())}initConverter(){if(this.ref!==this.host)return;const{host:e}=this,r=this.ref=e.querySelector("textarea, pre");if(e.nuIsShadowAllowed?e.attachShadow({mode:"open"}):this.setMod("host",!0),!r)return void t("converter: textarea tag required",this.host);e.nuRef=r,r.setAttribute("role","none"),r.setAttribute("aria-hidden","true");const n=this.container=this.createContainer();e.nuQueryChildren("*:not(pre):not(textarea)").forEach(e=>{e.parentNode.removeChild(e)}),(e.nuShadow||e).appendChild(n);const s=this.observe=this.createObserveListener(r,n,this.constructor.converter);new MutationObserver(()=>s()).observe(r,{characterData:!1,attributes:!1,childList:!0,subtree:!1}),s()}createContainer(){return r("nu-block")}createObserveListener(e,t,r){return()=>{const n=this.prepareContent("TEXTAREA"===e.tagName?e.textContent:e.innerHTML);this.apply(t,n,r),this.postHandler(t)}}apply(e,t,r){}prepareContent(e){return e||""}postHandler(e){}}export{n as C};
