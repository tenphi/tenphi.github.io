import{W as t,i}from"./index-957404e9.js";export default class extends t{static get params(){return{contextValue:!0,provideValue:!1}}init(){this.props.disabled=t=>{const i=null!=t;return i?this.unlinkListBox():this.linkListBox(),i},this.forceLinkValue(),this.host.nuOption=this,super.init(),this.linkContext("listbox",t=>{this.listbox&&this.removeOption(),this.listbox=t,t&&this.hasValue&&(this.addOption(t),this.setCurrent())},!1),this.on("click",()=>{this.doAction("input",this.value),this.doAction("close")})}disconnected(){super.disconnected();this.listbox&&this.hasValue&&this.removeOption()}fromContextValue(t){this.log("link context value",t),this.listbox&&(this.addOption(),this.setCurrent())}setValue(t,i){this.unlinkListBox(),super.setValue(t,i),this.linkListBox()}linkListBox(){this.listbox&&this.hasValue&&!this.disabled&&(this.addOption(),this.setCurrent())}unlinkListBox(){this.listbox&&this.hasValue&&this.removeOption()}addOption(t=this.listbox){t.addOption(this)}setCurrent(){const t=!!this.listbox&&i(this.value,this.listbox.value);this.setMod("current",t),this.setAria("selected",t||null),this.listbox&&t&&this.listbox.setAria("activedescendant",this.uniqId)}removeOption(){this.listbox&&this.listbox.removeOption(this)}}
